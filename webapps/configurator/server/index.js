var http = require('http');
var Router = require('node-simple-router');

var common = require("./common");


// Загрузим и закешируем определения модулей
common.MetaOfModules.get(function(res){
    console.log('Module definitions cached');
});



//var routes = require("./useFiles");
var routes = require("./useMongo");


var router = new Router();

router.get('/droneconfig', routes.droneconfig);
router.get('/metamodules', common.metamodules);
router.get('/newconfig', routes.newconfig);
router.get('/saveconfig', routes.saveconfig);
router.get('/getconfig/:id', routes.getconfig);
router.get('/getconfigs', routes.getconfigs);
router.delete('/delconfig/:id', routes.delconfig);
router.post('/runhosts', routes.runhosts);
router.post('/stophosts', routes.stophosts);
router.get('/gethoststatus', routes.gethoststatus);


var server = http.createServer(router);
server.listen(process.env.PORT || 4000);


var d = [{
    "_id": "5406139a90d1a800002ec64d",
    "current": false,
    "date": "2014-12-05T16:49:28",
    "jsonGraph": "{\"cells\":[{\"type\":\"devs.Model\",\"size\":{\"width\":90,\"height\":300},\"inPorts\":[],\"outPorts\":[\"accelX\",\"accelY\",\"accelZ\",\"gyroX\",\"gyroY\",\"gyroZ\",\"magX\",\"magY\",\"magZ\",\"temperature\"],\"position\":{\"x\":75,\"y\":120},\"angle\":0,\"moduleType\":\"c-gy87\",\"id\":\"6c82d6d9-121c-48a5-b779-940eec87648e\",\"z\":1,\"attrs\":{\".label\":{\"text\":\"c-gy87-1\",\"ref-x\":0.2,\"ref-y\":-2},\"rect\":{\"fill\":\"#2ECC71\"},\".inPorts circle\":{\"fill\":\"#16A085\"},\".outPorts circle\":{\"fill\":\"#E74C3C\"},\".outPorts>.port0>.port-label\":{\"text\":\"accelX\"},\".outPorts>.port0>.port-body\":{\"port\":{\"id\":\"accelX\",\"type\":\"out\"}},\".outPorts>.port0\":{\"ref\":\".body\",\"ref-y\":0.05,\"ref-dx\":0},\".outPorts>.port1>.port-label\":{\"text\":\"accelY\"},\".outPorts>.port1>.port-body\":{\"port\":{\"id\":\"accelY\",\"type\":\"out\"}},\".outPorts>.port1\":{\"ref\":\".body\",\"ref-y\":0.15000000000000002,\"ref-dx\":0},\".outPorts>.port2>.port-label\":{\"text\":\"accelZ\"},\".outPorts>.port2>.port-body\":{\"port\":{\"id\":\"accelZ\",\"type\":\"out\"}},\".outPorts>.port2\":{\"ref\":\".body\",\"ref-y\":0.25,\"ref-dx\":0},\".outPorts>.port3>.port-label\":{\"text\":\"gyroX\"},\".outPorts>.port3>.port-body\":{\"port\":{\"id\":\"gyroX\",\"type\":\"out\"}},\".outPorts>.port3\":{\"ref\":\".body\",\"ref-y\":0.35000000000000003,\"ref-dx\":0},\".outPorts>.port4>.port-label\":{\"text\":\"gyroY\"},\".outPorts>.port4>.port-body\":{\"port\":{\"id\":\"gyroY\",\"type\":\"out\"}},\".outPorts>.port4\":{\"ref\":\".body\",\"ref-y\":0.45,\"ref-dx\":0},\".outPorts>.port5>.port-label\":{\"text\":\"gyroZ\"},\".outPorts>.port5>.port-body\":{\"port\":{\"id\":\"gyroZ\",\"type\":\"out\"}},\".outPorts>.port5\":{\"ref\":\".body\",\"ref-y\":0.55,\"ref-dx\":0},\".outPorts>.port6>.port-label\":{\"text\":\"magX\"},\".outPorts>.port6>.port-body\":{\"port\":{\"id\":\"magX\",\"type\":\"out\"}},\".outPorts>.port6\":{\"ref\":\".body\",\"ref-y\":0.65,\"ref-dx\":0},\".outPorts>.port7>.port-label\":{\"text\":\"magY\"},\".outPorts>.port7>.port-body\":{\"port\":{\"id\":\"magY\",\"type\":\"out\"}},\".outPorts>.port7\":{\"ref\":\".body\",\"ref-y\":0.75,\"ref-dx\":0},\".outPorts>.port8>.port-label\":{\"text\":\"magZ\"},\".outPorts>.port8>.port-body\":{\"port\":{\"id\":\"magZ\",\"type\":\"out\"}},\".outPorts>.port8\":{\"ref\":\".body\",\"ref-y\":0.8500000000000001,\"ref-dx\":0},\".outPorts>.port9>.port-label\":{\"text\":\"temperature\"},\".outPorts>.port9>.port-body\":{\"port\":{\"id\":\"temperature\",\"type\":\"out\"}},\".outPorts>.port9\":{\"ref\":\".body\",\"ref-y\":0.9500000000000001,\"ref-dx\":0}}},{\"type\":\"devs.Model\",\"size\":{\"width\":90,\"height\":90},\"inPorts\":[\"in1\",\"in2\"],\"outPorts\":[\"out1\",\"out2\",\"out3\"],\"position\":{\"x\":495,\"y\":165},\"angle\":0,\"moduleType\":\"test-sender-receiver\",\"id\":\"d4d65f8a-80a4-479d-8825-1f62a7f21df2\",\"z\":2,\"attrs\":{\".label\":{\"text\":\"test-sender-receiver-1\",\"ref-x\":0.2,\"ref-y\":-2},\"rect\":{\"fill\":\"#2ECC71\"},\".inPorts circle\":{\"fill\":\"#16A085\"},\".outPorts circle\":{\"fill\":\"#E74C3C\"},\".inPorts>.port0>.port-label\":{\"text\":\"in1\"},\".inPorts>.port0>.port-body\":{\"port\":{\"id\":\"in1\",\"type\":\"in\"}},\".inPorts>.port0\":{\"ref\":\".body\",\"ref-y\":0.25},\".inPorts>.port1>.port-label\":{\"text\":\"in2\"},\".inPorts>.port1>.port-body\":{\"port\":{\"id\":\"in2\",\"type\":\"in\"}},\".inPorts>.port1\":{\"ref\":\".body\",\"ref-y\":0.75},\".outPorts>.port0>.port-label\":{\"text\":\"out1\"},\".outPorts>.port0>.port-body\":{\"port\":{\"id\":\"out1\",\"type\":\"out\"}},\".outPorts>.port0\":{\"ref\":\".body\",\"ref-y\":0.16666666666666666,\"ref-dx\":0},\".outPorts>.port1>.port-label\":{\"text\":\"out2\"},\".outPorts>.port1>.port-body\":{\"port\":{\"id\":\"out2\",\"type\":\"out\"}},\".outPorts>.port1\":{\"ref\":\".body\",\"ref-y\":0.5,\"ref-dx\":0},\".outPorts>.port2>.port-label\":{\"text\":\"out3\"},\".outPorts>.port2>.port-body\":{\"port\":{\"id\":\"out3\",\"type\":\"out\"}},\".outPorts>.port2\":{\"ref\":\".body\",\"ref-y\":0.8333333333333333,\"ref-dx\":0}}},{\"type\":\"link\",\"router\":{\"name\":\"metro\"},\"connector\":{\"name\":\"rounded\"},\"toolMarkup\":\"<g class=\\\"link-tool\\\"><g class=\\\"tool-remove\\\" event=\\\"remove\\\"><circle r=\\\"11\\\" /><path transform=\\\"scale(.8) translate(-16, -16)\\\" d=\\\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\\\"/><title>Remove link.</title></g><g event=\\\"link:options\\\"><circle r=\\\"11\\\" transform=\\\"translate(25)\\\"/><path fill=\\\"white\\\" transform=\\\"scale(.55) translate(29, -16)\\\" d=\\\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\\\"/><title>Link options.</title></g></g>\",\"id\":\"689dca81-2634-48d8-8ff8-b35cf9f62594\",\"embeds\":\"\",\"source\":{\"id\":\"6c82d6d9-121c-48a5-b779-940eec87648e\",\"selector\":\"g:nth-child(1) g:nth-child(4) g:nth-child(2) circle:nth-child(1)     \",\"port\":\"accelY\"},\"target\":{\"id\":\"d4d65f8a-80a4-479d-8825-1f62a7f21df2\",\"selector\":\"g:nth-child(1) g:nth-child(3) g:nth-child(2) circle:nth-child(1)     \",\"port\":\"in2\"},\"z\":1.7976931348623157e+308,\"mode\":\"queue\",\"nameOutGroup\":\"GyroAccelMagTemp\",\"portType\":\"float\",\"labels\":[{\"position\":0.5,\"attrs\":{\"text\":{\"text\":\"0.06\",\"fill\":\"white\",\"font-family\":\"sans-serif\"},\"rect\":{\"stroke\":\"#3498DB\",\"fill\":\"#3498DB\",\"stroke-width\":10,\"rx\":3,\"ry\":3}}}],\"attrs\":{\".marker-target\":{\"fill\":\"red\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"},\".connection\":{\"stroke\":\"red\",\"stroke-width\":\"2\"}}},{\"type\":\"link\",\"router\":{\"name\":\"metro\"},\"connector\":{\"name\":\"rounded\"},\"toolMarkup\":\"<g class=\\\"link-tool\\\"><g class=\\\"tool-remove\\\" event=\\\"remove\\\"><circle r=\\\"11\\\" /><path transform=\\\"scale(.8) translate(-16, -16)\\\" d=\\\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\\\"/><title>Remove link.</title></g><g event=\\\"link:options\\\"><circle r=\\\"11\\\" transform=\\\"translate(25)\\\"/><path fill=\\\"white\\\" transform=\\\"scale(.55) translate(29, -16)\\\" d=\\\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\\\"/><title>Link options.</title></g></g>\",\"id\":\"bf794a31-814c-49df-b342-4b4050406899\",\"embeds\":\"\",\"source\":{\"id\":\"6c82d6d9-121c-48a5-b779-940eec87648e\",\"selector\":\"g:nth-child(1) g:nth-child(4) g:nth-child(1) circle:nth-child(1)     \",\"port\":\"accelX\"},\"target\":{\"id\":\"d4d65f8a-80a4-479d-8825-1f62a7f21df2\",\"selector\":\"g:nth-child(1) g:nth-child(3) g:nth-child(1) circle:nth-child(1)     \",\"port\":\"in1\"},\"z\":1.7976931348623157e+308,\"mode\":\"queue\",\"nameOutGroup\":\"GyroAccelMagTemp\",\"portType\":\"float\",\"labels\":[{\"position\":0.5,\"attrs\":{\"text\":{\"text\":\"0.66\",\"fill\":\"white\",\"font-family\":\"sans-serif\"},\"rect\":{\"stroke\":\"#3498DB\",\"fill\":\"#3498DB\",\"stroke-width\":10,\"rx\":3,\"ry\":3}}}],\"attrs\":{\".marker-target\":{\"fill\":\"red\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"},\".connection\":{\"stroke\":\"red\",\"stroke-width\":\"2\"}}}]} ",
    "modulesParams": {
        "c-gy87-1": {
            "common": {"Task Priority": 80, "Task Period": 200, "Transfer task period": 200000},
            "specific": {"I2C Device": "/dev/i2c-1"},
            "telemetrySubscriptions": {"GyroAccelMagTemp": true}
        },
        "test-sender-receiver-1": {
            "common": {
                "Task Priority": 80,
                "Task Period": 200000,
                "Transfer task period": 200000
            },
            "specific": {"I2C Device": "default value", "Test float Param": 123, "Test Boolean Param": false},
            "telemetrySubscriptions": {"Output1": false, "Output2": false}
        }
    },
    "name": "New",
    "version": "1"
}, {
    "name": "New",
    "version": "333",
    "current": true,
    "jsonGraph": "{\"cells\":[{\"type\":\"devs.Model\",\"size\":{\"width\":90,\"height\":300},\"inPorts\":[],\"outPorts\":[\"accelX\",\"accelY\",\"accelZ\",\"gyroX\",\"gyroY\",\"gyroZ\",\"magX\",\"magY\",\"magZ\",\"temperature\"],\"position\":{\"x\":75,\"y\":120},\"angle\":0,\"moduleType\":\"c-gy87\",\"id\":\"6c82d6d9-121c-48a5-b779-940eec87648e\",\"z\":1,\"attrs\":{\".label\":{\"text\":\"c-gy87-1\",\"ref-x\":0.2,\"ref-y\":-2},\"rect\":{\"fill\":\"#2ECC71\"},\".inPorts circle\":{\"fill\":\"#16A085\"},\".outPorts circle\":{\"fill\":\"#E74C3C\"},\".outPorts>.port0>.port-label\":{\"text\":\"accelX\"},\".outPorts>.port0>.port-body\":{\"port\":{\"id\":\"accelX\",\"type\":\"out\"}},\".outPorts>.port0\":{\"ref\":\".body\",\"ref-y\":0.05,\"ref-dx\":0},\".outPorts>.port1>.port-label\":{\"text\":\"accelY\"},\".outPorts>.port1>.port-body\":{\"port\":{\"id\":\"accelY\",\"type\":\"out\"}},\".outPorts>.port1\":{\"ref\":\".body\",\"ref-y\":0.15000000000000002,\"ref-dx\":0},\".outPorts>.port2>.port-label\":{\"text\":\"accelZ\"},\".outPorts>.port2>.port-body\":{\"port\":{\"id\":\"accelZ\",\"type\":\"out\"}},\".outPorts>.port2\":{\"ref\":\".body\",\"ref-y\":0.25,\"ref-dx\":0},\".outPorts>.port3>.port-label\":{\"text\":\"gyroX\"},\".outPorts>.port3>.port-body\":{\"port\":{\"id\":\"gyroX\",\"type\":\"out\"}},\".outPorts>.port3\":{\"ref\":\".body\",\"ref-y\":0.35000000000000003,\"ref-dx\":0},\".outPorts>.port4>.port-label\":{\"text\":\"gyroY\"},\".outPorts>.port4>.port-body\":{\"port\":{\"id\":\"gyroY\",\"type\":\"out\"}},\".outPorts>.port4\":{\"ref\":\".body\",\"ref-y\":0.45,\"ref-dx\":0},\".outPorts>.port5>.port-label\":{\"text\":\"gyroZ\"},\".outPorts>.port5>.port-body\":{\"port\":{\"id\":\"gyroZ\",\"type\":\"out\"}},\".outPorts>.port5\":{\"ref\":\".body\",\"ref-y\":0.55,\"ref-dx\":0},\".outPorts>.port6>.port-label\":{\"text\":\"magX\"},\".outPorts>.port6>.port-body\":{\"port\":{\"id\":\"magX\",\"type\":\"out\"}},\".outPorts>.port6\":{\"ref\":\".body\",\"ref-y\":0.65,\"ref-dx\":0},\".outPorts>.port7>.port-label\":{\"text\":\"magY\"},\".outPorts>.port7>.port-body\":{\"port\":{\"id\":\"magY\",\"type\":\"out\"}},\".outPorts>.port7\":{\"ref\":\".body\",\"ref-y\":0.75,\"ref-dx\":0},\".outPorts>.port8>.port-label\":{\"text\":\"magZ\"},\".outPorts>.port8>.port-body\":{\"port\":{\"id\":\"magZ\",\"type\":\"out\"}},\".outPorts>.port8\":{\"ref\":\".body\",\"ref-y\":0.8500000000000001,\"ref-dx\":0},\".outPorts>.port9>.port-label\":{\"text\":\"temperature\"},\".outPorts>.port9>.port-body\":{\"port\":{\"id\":\"temperature\",\"type\":\"out\"}},\".outPorts>.port9\":{\"ref\":\".body\",\"ref-y\":0.9500000000000001,\"ref-dx\":0}}},{\"type\":\"devs.Model\",\"size\":{\"width\":90,\"height\":90},\"inPorts\":[\"in1\",\"in2\"],\"outPorts\":[\"out1\",\"out2\",\"out3\"],\"position\":{\"x\":495,\"y\":165},\"angle\":0,\"moduleType\":\"test-sender-receiver\",\"id\":\"d4d65f8a-80a4-479d-8825-1f62a7f21df2\",\"z\":2,\"attrs\":{\".label\":{\"text\":\"test-sender-receiver-1\",\"ref-x\":0.2,\"ref-y\":-2},\"rect\":{\"fill\":\"#2ECC71\"},\".inPorts circle\":{\"fill\":\"#16A085\"},\".outPorts circle\":{\"fill\":\"#E74C3C\"},\".inPorts>.port0>.port-label\":{\"text\":\"in1\"},\".inPorts>.port0>.port-body\":{\"port\":{\"id\":\"in1\",\"type\":\"in\"}},\".inPorts>.port0\":{\"ref\":\".body\",\"ref-y\":0.25},\".inPorts>.port1>.port-label\":{\"text\":\"in2\"},\".inPorts>.port1>.port-body\":{\"port\":{\"id\":\"in2\",\"type\":\"in\"}},\".inPorts>.port1\":{\"ref\":\".body\",\"ref-y\":0.75},\".outPorts>.port0>.port-label\":{\"text\":\"out1\"},\".outPorts>.port0>.port-body\":{\"port\":{\"id\":\"out1\",\"type\":\"out\"}},\".outPorts>.port0\":{\"ref\":\".body\",\"ref-y\":0.16666666666666666,\"ref-dx\":0},\".outPorts>.port1>.port-label\":{\"text\":\"out2\"},\".outPorts>.port1>.port-body\":{\"port\":{\"id\":\"out2\",\"type\":\"out\"}},\".outPorts>.port1\":{\"ref\":\".body\",\"ref-y\":0.5,\"ref-dx\":0},\".outPorts>.port2>.port-label\":{\"text\":\"out3\"},\".outPorts>.port2>.port-body\":{\"port\":{\"id\":\"out3\",\"type\":\"out\"}},\".outPorts>.port2\":{\"ref\":\".body\",\"ref-y\":0.8333333333333333,\"ref-dx\":0}}},{\"type\":\"link\",\"router\":{\"name\":\"metro\"},\"connector\":{\"name\":\"rounded\"},\"toolMarkup\":\"<g class=\\\"link-tool\\\"><g class=\\\"tool-remove\\\" event=\\\"remove\\\"><circle r=\\\"11\\\" /><path transform=\\\"scale(.8) translate(-16, -16)\\\" d=\\\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\\\"/><title>Remove link.</title></g><g event=\\\"link:options\\\"><circle r=\\\"11\\\" transform=\\\"translate(25)\\\"/><path fill=\\\"white\\\" transform=\\\"scale(.55) translate(29, -16)\\\" d=\\\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\\\"/><title>Link options.</title></g></g>\",\"id\":\"689dca81-2634-48d8-8ff8-b35cf9f62594\",\"embeds\":\"\",\"source\":{\"id\":\"6c82d6d9-121c-48a5-b779-940eec87648e\",\"selector\":\"g:nth-child(1) g:nth-child(4) g:nth-child(2) circle:nth-child(1)     \",\"port\":\"accelY\"},\"target\":{\"id\":\"d4d65f8a-80a4-479d-8825-1f62a7f21df2\",\"selector\":\"g:nth-child(1) g:nth-child(3) g:nth-child(2) circle:nth-child(1)     \",\"port\":\"in2\"},\"z\":1.7976931348623157e+308,\"mode\":\"queue\",\"nameOutGroup\":\"GyroAccelMagTemp\",\"portType\":\"float\",\"labels\":[{\"position\":0.5,\"attrs\":{\"text\":{\"text\":\"0.06\",\"fill\":\"white\",\"font-family\":\"sans-serif\"},\"rect\":{\"stroke\":\"#3498DB\",\"fill\":\"#3498DB\",\"stroke-width\":10,\"rx\":3,\"ry\":3}}}],\"attrs\":{\".marker-target\":{\"fill\":\"red\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"},\".connection\":{\"stroke\":\"red\",\"stroke-width\":\"2\"}}},{\"type\":\"link\",\"router\":{\"name\":\"metro\"},\"connector\":{\"name\":\"rounded\"},\"toolMarkup\":\"<g class=\\\"link-tool\\\"><g class=\\\"tool-remove\\\" event=\\\"remove\\\"><circle r=\\\"11\\\" /><path transform=\\\"scale(.8) translate(-16, -16)\\\" d=\\\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\\\"/><title>Remove link.</title></g><g event=\\\"link:options\\\"><circle r=\\\"11\\\" transform=\\\"translate(25)\\\"/><path fill=\\\"white\\\" transform=\\\"scale(.55) translate(29, -16)\\\" d=\\\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\\\"/><title>Link options.</title></g></g>\",\"id\":\"bf794a31-814c-49df-b342-4b4050406899\",\"embeds\":\"\",\"source\":{\"id\":\"6c82d6d9-121c-48a5-b779-940eec87648e\",\"selector\":\"g:nth-child(1) g:nth-child(4) g:nth-child(1) circle:nth-child(1)     \",\"port\":\"accelX\"},\"target\":{\"id\":\"d4d65f8a-80a4-479d-8825-1f62a7f21df2\",\"selector\":\"g:nth-child(1) g:nth-child(3) g:nth-child(1) circle:nth-child(1)     \",\"port\":\"in1\"},\"z\":1.7976931348623157e+308,\"mode\":\"queue\",\"nameOutGroup\":\"GyroAccelMagTemp\",\"portType\":\"float\",\"labels\":[{\"position\":0.5,\"attrs\":{\"text\":{\"text\":\"0.66\",\"fill\":\"white\",\"font-family\":\"sans-serif\"},\"rect\":{\"stroke\":\"#3498DB\",\"fill\":\"#3498DB\",\"stroke-width\":10,\"rx\":3,\"ry\":3}}}],\"attrs\":{\".marker-target\":{\"fill\":\"red\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"},\".connection\":{\"stroke\":\"red\",\"stroke-width\":\"2\"}}}]}",
    "modulesParams": {
        "c-gy87-1": {
            "common": {"Task Priority": 80, "Task Period": 200, "Transfer task period": 200000},
            "specific": {"I2C Device": "/dev/i2c-1"},
            "telemetrySubscriptions": {"GyroAccelMagTemp": true}
        },
        "test-sender-receiver-1": {
            "common": {
                "Task Priority": 80,
                "Task Period": 200000,
                "Transfer task period": 200000
            },
            "specific": {"I2C Device": "default value", "Test float Param": 123, "Test Boolean Param": false},
            "telemetrySubscriptions": {"Output1": false, "Output2": false}
        }
    },
    "_id": "54a3fbb6787f199953271c56"
}, {
    "_id": "53e520bf0a6681000054b116",
    "current": false,
    "date": "2014-09-24T20:44:16",
    "jsonGraph": "{\"cells\":[{\"type\":\"devs.Model\",\"size\":{\"width\":90,\"height\":270},\"inPorts\":[\"in1\",\"in2\"],\"outPorts\":[\"char_out\",\"short_out\",\"int_out\",\"long_out\",\"long_long_out\",\"float_out\",\"double_out\",\"string_out\",\"out3\"],\"position\":{\"x\":90,\"y\":45},\"angle\":0,\"moduleType\":\"my_test\",\"id\":\"3bd923b1-097e-4501-9612-d2bf1b5e1009\",\"z\":4,\"attrs\":{\".label\":{\"text\":\"my_test-1\",\"ref-x\":0.2,\"ref-y\":-2},\"rect\":{\"fill\":\"#2ECC71\"},\".inPorts circle\":{\"fill\":\"#16A085\"},\".outPorts circle\":{\"fill\":\"#E74C3C\"},\".inPorts>.port0>.port-label\":{\"text\":\"in1\"},\".inPorts>.port0>.port-body\":{\"port\":{\"id\":\"in1\",\"type\":\"in\"}},\".inPorts>.port0\":{\"ref\":\".body\",\"ref-y\":0.25},\".inPorts>.port1>.port-label\":{\"text\":\"in2\"},\".inPorts>.port1>.port-body\":{\"port\":{\"id\":\"in2\",\"type\":\"in\"}},\".inPorts>.port1\":{\"ref\":\".body\",\"ref-y\":0.75},\".outPorts>.port0>.port-label\":{\"text\":\"char_out\"},\".outPorts>.port0>.port-body\":{\"port\":{\"id\":\"char_out\",\"type\":\"out\"}},\".outPorts>.port0\":{\"ref\":\".body\",\"ref-y\":0.05555555555555555,\"ref-dx\":0},\".outPorts>.port1>.port-label\":{\"text\":\"short_out\"},\".outPorts>.port1>.port-body\":{\"port\":{\"id\":\"short_out\",\"type\":\"out\"}},\".outPorts>.port1\":{\"ref\":\".body\",\"ref-y\":0.16666666666666666,\"ref-dx\":0},\".outPorts>.port2>.port-label\":{\"text\":\"int_out\"},\".outPorts>.port2>.port-body\":{\"port\":{\"id\":\"int_out\",\"type\":\"out\"}},\".outPorts>.port2\":{\"ref\":\".body\",\"ref-y\":0.2777777777777778,\"ref-dx\":0},\".outPorts>.port3>.port-label\":{\"text\":\"long_out\"},\".outPorts>.port3>.port-body\":{\"port\":{\"id\":\"long_out\",\"type\":\"out\"}},\".outPorts>.port3\":{\"ref\":\".body\",\"ref-y\":0.38888888888888884,\"ref-dx\":0},\".outPorts>.port4>.port-label\":{\"text\":\"long_long_out\"},\".outPorts>.port4>.port-body\":{\"port\":{\"id\":\"long_long_out\",\"type\":\"out\"}},\".outPorts>.port4\":{\"ref\":\".body\",\"ref-y\":0.5,\"ref-dx\":0},\".outPorts>.port5>.port-label\":{\"text\":\"float_out\"},\".outPorts>.port5>.port-body\":{\"port\":{\"id\":\"float_out\",\"type\":\"out\"}},\".outPorts>.port5\":{\"ref\":\".body\",\"ref-y\":0.611111111111111,\"ref-dx\":0},\".outPorts>.port6>.port-label\":{\"text\":\"double_out\"},\".outPorts>.port6>.port-body\":{\"port\":{\"id\":\"double_out\",\"type\":\"out\"}},\".outPorts>.port6\":{\"ref\":\".body\",\"ref-y\":0.7222222222222222,\"ref-dx\":0},\".outPorts>.port7>.port-label\":{\"text\":\"string_out\"},\".outPorts>.port7>.port-body\":{\"port\":{\"id\":\"string_out\",\"type\":\"out\"}},\".outPorts>.port7\":{\"ref\":\".body\",\"ref-y\":0.8333333333333333,\"ref-dx\":0},\".outPorts>.port8>.port-label\":{\"text\":\"out3\"},\".outPorts>.port8>.port-body\":{\"port\":{\"id\":\"out3\",\"type\":\"out\"}},\".outPorts>.port8\":{\"ref\":\".body\",\"ref-y\":0.9444444444444444,\"ref-dx\":0}}}]} ",
    "modulesParams": {
        "my_test-1": {
            "common": {
                "Task Priority": 80,
                "Task Period": 200000,
                "Transfer task period": 200000
            },
            "specific": {"I2C Device": "default value", "Test Number Param": 123, "Test Boolean Param": false},
            "telemetrySubscriptions": {"Output1": false, "Output2": false}
        }
    },
    "name": "New",
    "version": "2"
}];